<div class="subview-container">
  <div class="subview-header">
    <h3>Libro Mayor</h3>
    <div class="header-actions">
      <button class="secondary-button">
        <lucide-icon [img]="CalendarIcon" size="16"></lucide-icon>
        <span>Jul 2025</span>
      </button>
      <button class="secondary-button">
        <lucide-icon [img]="FilterIcon" size="16"></lucide-icon>
        <span>Filtros</span>
      </button>
      <button class="primary-button">
        <lucide-icon [img]="ExportIcon" size="16"></lucide-icon>
        <span>Exportar</span>
      </button>
    </div>
  </div>

  <div class="ledger-header card">
    <h4>Cuenta: <span class="account-name">{{ selectedAccount().code }} - {{ selectedAccount().name }}</span></h4>
    <div class="balance-summary">
      <div class="balance-item">
        <span>Saldo Inicial</span>
        <strong>{{ initialBalance() | number:'1.2-2' }}</strong>
      </div>
      <div class="balance-item">
        <span>Saldo Final</span>
        <strong>{{ finalBalance() | number:'1.2-2' }}</strong>
      </div>
    </div>
  </div>

  <div class="table-container card">
    <table class="data-table ledger-table">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Asiento #</th>
          <th>Descripción</th>
          <th class="text-right">Débito</th>
          <th class="text-right">Crédito</th>
          <th class="text-right">Saldo</th>
        </tr>
      </thead>
      <tbody>
        @for (line of ledgerLines(); track $index) {
        <tr>
          <td>{{ line.date }}</td>
          <td>
            @if(line.entryNumber !== 'OPEN') {
            <a href="#" class="table-link">{{ line.entryNumber }}</a>
            } @else {
            <span>{{ line.entryNumber }}</span>
            }
          </td>
          <td>{{ line.description }}</td>
          <td class="text-right amount-cell">{{ line.debit | number:'1.2-2' }}</td>
          <td class="text-right amount-cell">{{ line.credit | number:'1.2-2' }}</td>
          <td class="text-right balance-cell">{{ line.balance | number:'1.2-2' }}</td>
        </tr>
        } @empty {
        <tr>
          <td colspan="6" class="empty-state">No se encontraron movimientos para esta cuenta en el período seleccionado.
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>