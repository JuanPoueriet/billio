<div class="subview-container">
  <div class="subview-header">
    <h3>Daily Journal</h3>
    <div class="header-actions">
      <button class="secondary-button">
        <lucide-icon [img]="CalendarIcon" size="16"></lucide-icon>
        <span>Jul 2025</span>
      </button>
      <button class="secondary-button">
        <lucide-icon [img]="FilterIcon" size="16"></lucide-icon>
        <span>Filters</span>
      </button>
      <button class="primary-button">
        <lucide-icon [img]="ExportIcon" size="16"></lucide-icon>
        <span>Export</span>
      </button>
    </div>
  </div>
  <div class="table-container card">
    <table class="data-table journal-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Entry #</th>
          <th>Account</th>
          <th>Description</th>
          <th class="text-right">Debit</th>
          <th class="text-right">Credit</th>
        </tr>
      </thead>
      <tbody>
        @for (entry of journalEntries(); track entry.id) {
          @for (line of entry.lines; track $index; let isFirst = $first) {
            <tr class="journal-row">
              @if (isFirst) {
                <td [attr.rowspan]="entry.lines.length">{{ entry.date }}</td>
                <td [attr.rowspan]="entry.lines.length"><a href="#" class="table-link">{{ entry.id }}</a></td>
              }
              <td class="account-cell">{{ line.accountCode }} - {{ line.accountName }}</td>
              @if (isFirst) {
                <td [attr.rowspan]="entry.lines.length">{{ entry.description }}</td>
              }
              <td class="text-right amount-cell">{{ line.debit | number:'1.2-2' }}</td>
              <td class="text-right amount-cell">{{ line.credit | number:'1.2-2' }}</td>
            </tr>
          }
          <tr class="separator-row">
            <td colspan="6"></td>
          </tr>
        } @empty {
          <tr><td colspan="6" class="empty-state">No journal entries found for this period.</td></tr>
        }
      </tbody>
    </table>
  </div>
</div>