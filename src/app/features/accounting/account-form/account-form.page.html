<div class="view-container">
    <form [formGroup]="accountForm" (ngSubmit)="saveAccount()">
        <div class="view-header">
            <div class="header-content">
                <h1>{{ isEditMode() ? 'Edit Account' : 'New Account' }}</h1>
                <p>Define the details of the general ledger account.</p>
            </div>
            <div class="header-actions">
                <a routerLink="/app/accounting/chart-of-accounts" class="secondary-button">Cancel</a>
                <button type="submit" class="primary-button" [disabled]="accountForm.invalid">
                    <lucide-icon [img]="SaveIcon" size="16"></lucide-icon>
                    <span>Save Account</span>
                </button>
            </div>
        </div>

        <div class="form-container card">
            <div class="form-section">
                <div class="form-grid">
                    <div class="form-field">
                        <label for="accountCode">Account Code*</label>
                        <input id="accountCode" formControlName="accountCode" placeholder="e.g., 1010-03">
                    </div>
                    <div class="form-field">
                        <label for="accountName">Account Name*</label>
                        <input id="accountName" formControlName="accountName" placeholder="e.g., Savings Account">
                    </div>
                    <div class="form-field">
                        <label for="accountType">Account Type*</label>
                        <select id="accountType" formControlName="accountType">
                            <option [value]="null" disabled>Select a type...</option>
                            <option value="Asset">Asset</option>
                            <option value="Liability">Liability</option>
                            <option value="Equity">Equity</option>
                            <option value="Revenue">Revenue</option>
                            <option value="Expense">Expense</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="parentAccountId">Parent Account</label>
                        <select id="parentAccountId" formControlName="parentAccountId">
                            <option [value]="null">None (Top Level Account)</option>
                            @for (account of parentAccounts(); track account.id) {
                            <option [value]="account.id">{{ account.code }} - {{ account.name }}</option>
                            }
                        </select>
                    </div>
                    <div class="form-field full-width">
                        <label for="description">Description</label>
                        <textarea id="description" formControlName="description" rows="3"
                            placeholder="Add an internal note or description for this account..."></textarea>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>