<div class="view-container">
    <form [formGroup]="accountForm" (ngSubmit)="saveAccount()">
        <div class="view-header">
            <div class="header-content">
                <h1>{{ isEditMode() ? 'Edit Account' : 'New Account' }}</h1>
                <p>Define the details of the general ledger account.</p>
            </div>
            <div class="header-actions">
                <a routerLink="/app/accounting/chart-of-accounts" class="secondary-button">Cancel</a>
                <button type="submit" class="primary-button" [disabled]="accountForm.invalid">
                    <lucide-icon [img]="SaveIcon" size="16"></lucide-icon>
                    <span>Save Account</span>
                </button>
            </div>
        </div>

        <div class="form-container card">
            <div class="form-section">
                <div class="form-grid">
                    <div class="form-field">
                        <label for="code">Account Code*</label>
                        <input id="code" formControlName="code" placeholder="e.g., 1010-03">
                    </div>
                    <div class="form-field">
                        <label for="name">Account Name*</label>
                        <input id="name" formControlName="name" placeholder="e.g., Savings Account">
                    </div>
                    <div class="form-field">
                        <label for="type">Account Type*</label>
                        <select id="type" formControlName="type">
                            <option [value]="null" disabled>Select a type...</option>
                            @for (option of accountTypeOptions; track option.value) {
                            <option [value]="option.value">{{ option.label }}</option>
                            }
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="category">Account Category*</label>
                        <select id="category" formControlName="category">
                            <option [value]="null" disabled>Select a category...</option>
                            @for (option of accountCategoryOptions; track option.value) {
                            <option [value]="option.value">{{ option.label }}</option>
                            }
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="parentId">Parent Account</label>
                        <select id="parentId" formControlName="parentId">
                            <option [value]="null">None (Top Level Account)</option>
                            @for (account of parentAccounts(); track account.id) {
                            <option [value]="account.id">{{ account.code }} - {{ account.name }}</option>
                            }
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="isActive">Active</label>
                        <label class="toggle">
                            <input type="checkbox" id="isActive" formControlName="isActive">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="form-field full-width">
                        <label for="description">Description</label>
                        <textarea id="description" formControlName="description" rows="3"
                            placeholder="Add an internal note or description for this account..."></textarea>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>